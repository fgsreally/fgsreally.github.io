(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{541:function(t,s,a){"use strict";a.r(s);var e=a(4),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("介绍")]),t._v(" "),a("p",[t._v("veture 最新进展"),a("br")])]),t._v(" "),a("h2",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v(".vue 文件是高度依赖 compiler-sfc 的（vue 版本不同会有所不同，vue2 是依赖 compiler-template 那个的，这也是导致兼容 vue23 的组件库极其难搞的原因),\n而这个 sfc 的东西呢，它是一个单文件的性质，它只能分析本文件，不会沿着 import 去找，所以.vue 中是不能引用其他文件的 types 的。在 sfc 中的话呢，很多工具是不支持.vue 文件的，typedoc 分析不了，产生不了文档。")]),t._v(" "),a("h2",{attrs:{id:"解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("如果想根本上解决这个问题，不太容易，因为相当于要 ast 一路找上去，然后剥离下来交给 sfc 解析，或者直接重写 sfc 解析（但也是要 ast 找的），这在开发环境性能是有问题的。只好勉强一点，把需求处理就好，原有一个 script 标签，现在可以写成多个（写成 script 标签就可以享受语法高亮和类型提示，不然就要自己写 vscode 插件了），然后专门分一个标记 types，专门用于写类型,然后抢在 sfc 解析之前，比如 vite 中的话你只要在 vue 插件之前或 pre 就行，把这个 types 标签拔出来整合到 script 标签，从而使得 sfc 解析正常，然后拔出来的部分专门生成一个文件，放在包内部。然后再用于 typedoc 去跑")]),t._v(" "),a("h2",{attrs:{id:"进一步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进一步"}},[t._v("#")]),t._v(" 进一步")]),t._v(" "),a("p",[t._v("也可以多加几个标签，比如再加个 script example ,里面写一个 props 的数据，直接在文档或 storybook 中跑出来一个 example，多写几个 example 标签就是不同的 example。我在 veture 中就是这样，现在 vue 插件之前把标签拔下来，在插件运行完后把 props 装回去")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//test.vue 原本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sfc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//组件")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//test.vue 更改后")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sfc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//组件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" props1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("props1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//数据")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//引用就变成了")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./test.vue"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./test.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("就可以在运行的项目中，按需解析出自己需要的东西,比如，可以添加一个docs标签，去写md文档，然后页面中就可以直接获得文档了。开发环境生产环境都是可行的")])])}),[],!1,null,null,null);s.default=r.exports}}]);