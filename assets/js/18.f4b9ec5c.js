(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{501:function(e,t,s){"use strict";s.r(t);var o=s(4),v=Object(o.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("介绍")]),e._v(" "),s("p",[e._v("webpack 热更新流程（无代码部分"),s("br")])]),e._v(" "),s("h3",{attrs:{id:"热更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[e._v("#")]),e._v(" 热更新")]),e._v(" "),s("p",[e._v("我之前那个热更新回头看看问题有点小多了...")]),e._v(" "),s("p",[e._v("这里理论就懒得写了，里面的一些函数也有点难啃，先把流程记了")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("初次启动webpack dev server,生成webpack实例，生成compiler，compiler负责监视文件改动")])]),e._v(" "),s("li",[s("p",[e._v("启动server，使浏览器可以访问静态资源")])]),e._v(" "),s("li",[s("p",[e._v("启动websocket,负责通知前端是否需要更新，也即HMR Server")])])]),e._v(" "),s("blockquote",[s("p",[e._v("注意此时前端存在一个HMR Runtime，也就是打包出来的chunk并不只有我们写的js，里面偷偷加了点东西")])]),e._v(" "),s("ol",[s("li",[s("p",[e._v("当文件变化，通过compiler.hooks.done，在钩子中通知HMR server用websocket向前端发送hash，go事件")])]),e._v(" "),s("li",[s("p",[e._v("前端js中的HMR Runtime接收事件，执行函数，发起  请求得到json，文件，根据json中的信息（h：新生成的 Hash 值，c：当前要热更新的文件对应的是哪个模块）再去获取新的模块资源解析并局部刷新页面（跟ajax一样了，但局部刷新好像还需要其他东西参与）")])])])])}),[],!1,null,null,null);t.default=v.exports}}]);